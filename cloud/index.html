<html>
<style type="text/css" media="screen">
    #editor { 
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
    }
</style>
<head><title>BerryBots Cloud demo</title></head>
<body>

<script type="text/javascript">
function runMatch() {
  var x = new XMLHttpRequest();
  var params = "stage=" + document.getElementById('Stage').value
      + "&opponent=" + document.getElementById('Opponent').value;
  x.open('POST', '/cgi-bin/runmatch.pl', true);
  x.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
  x.onreadystatechange = function () {
    if (x.readyState == 4) {
      var parser = new DOMParser();
      var xmlDoc = parser.parseFromString(x.responseText, 'application/xml');
      var r = document.getElementById('replay');
      r.value = xmlDoc.getElementsByTagName("r")[0].childNodes[0].nodeValue;
    }
  };
  x.send(params);
}
</script>

<div id="editor">-- A ship control program.

ship = nil
world = nil

function init(shipArg, worldArg)
  ship = shipArg
  world = worldArg
  ship:setName("Player")
  ship:setShipColor(255, 255, 0)
  ship:setLaserColor(0, 255, 0)
end

function run(enemyShips, sensors)

end
</div>

<div style="width=500px; position: relative;">
  <script src="ace.js" type="text/javascript" charset="utf-8"></script>
  <script>
    var editor = ace.edit("editor");
    editor.getSession().setMode("ace/mode/lua");
    editor.setTheme("ace/theme/textmate");
    editor.getSession().setTabSize(2);
    editor.getSession().setUseSoftTabs(true);
    editor.setHighlightActiveLine(false);
  </script>
</div>

<div style="position: absolute; left: 650px;">
  <form>
    Stage:
    <select id="Stage">
      <option>battle1.lua</option>
      <option>joust.lua</option>
    </select>
    <br>
    Opponent:
    <select id="Opponent">
      <option>chaser.lua</option>
      <option>jouster.lua</option>
      <option>randombot.lua</option>
      <option>wallhugger.lua</option>
      <option>basicbattler.lua</option>
    </select>
    <br>
    <input type="button" value="Run Match" onclick="runMatch()">
    <br>
    <input type="text" id="replay">
  </form>
</div>

</body>
</html>
